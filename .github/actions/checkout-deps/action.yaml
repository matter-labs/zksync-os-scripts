name: 'Checkout dependencies'

description: 'Checkout dependencies for testing the scripts.'

inputs:
  checkout_dir:
    type: string
    description: 'Directory to checkout dependencies into.'
    required: false
    default: 'workspace'
  zksync_airbender_version:
    type: string
    description: 'Version of zksync-airbender to checkout.'
    required: false
    default: ''
  zkos_wrapper_version:
    type: string
    description: 'Version of zkos-wrapper to checkout.'
    required: false
    default: ''
  zksync_era_version:
    type: string
    description: 'Version of zksync-era to checkout.'
    required: false
    default: ''
  era_contracts_version:
    type: string
    description: 'Version of era-contracts to checkout.'
    required: false
    default: ''
  zksync_os_server_version:
    type: string
    description: 'Version of zksync-os-server to checkout.'
    required: false
    default: ''


runs:
  using: composite
  steps:

    - name: Checkout zkos-wrapper
      if: ${{ inputs.zkos-wrapper-version != '' }}
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
      with:
        repository: matter-labs/zkos-wrapper
        path: ${{ inputs.checkout_dir }}/zkos-wrapper
        ref: ${{ inputs.zkos_wrapper_version }}

    - name: Checkout zksync-airbender
      if: ${{ inputs.zksync_airbender_version != '' }}
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
      with:
        repository: matter-labs/zksync-airbender
        path: ${{ inputs.checkout_dir }}/zksync-airbender
        ref: ${{ inputs.zksync_airbender_version }}

    - name: Checkout zksync-era
      if: ${{ inputs.zksync_era_version != '' }}
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
      with:
        repository: matter-labs/zksync-era
        path: ${{ inputs.checkout_dir }}/zksync-era
        ref: ${{ inputs.zksync_era_version }}
        submodules: 'recursive'

    - name: Checkout era-contracts
      if: ${{ inputs.era_contracts_version != '' }}
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
      with:
        repository: matter-labs/era-contracts
        path: ${{ inputs.checkout_dir }}/era-contracts
        ref: ${{ inputs.era_contracts_version }}
        submodules: 'recursive'

    - name: Checkout zksync-os-server
      if: ${{ inputs.zksync_os_server_version != '' }}
      uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1
      with:
        repository: matter-labs/zksync-os-server
        path: ${{ inputs.checkout_dir }}/zksync-os-server
        ref: ${{ inputs.zksync_os_server_version }}
